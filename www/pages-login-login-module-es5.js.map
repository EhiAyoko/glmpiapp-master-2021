{"version":3,"sources":["webpack:///src/app/pages/login/login.page.html","webpack:///src/app/pages/login/login-routing.module.ts","webpack:///src/app/pages/login/login.module.ts","webpack:///src/app/pages/login/login.page.scss","webpack:///src/app/pages/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","navCtrl","toastCtrl","loginProvider","loadingCtrl","viewCtrl","storage","events","loadingController","login","loggedin","start","get","then","data","presentToast","showSpinner","response","success","loginErr","login_data","console","log","localStorage","setItem","message","publish","set","dismiss","hideSpinner","err","e","warn","setTimeout","remove","navigateBack","create","loading","present","navigateForward","msg","duration","position","toast","selector","template"],"mappings":"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","file":"pages-login-login-module-es5.js","sourcesContent":["export default \"\\n<ion-header>\\n\\t<ion-toolbar color=\\\"tertiary\\\">\\n\\t\\t<ion-title>Login</ion-title>\\n\\t<ion-buttons slot=\\\"end\\\" (click)=\\\"dismiss()\\\">\\n\\t\\t\\t<ion-icon name=\\\"close\\\"></ion-icon>\\n\\t</ion-buttons>\\n\\t</ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"ion-padding content\\\">\\n\\t<form (ngSubmit)=\\\"doLogin()\\\" padding *ngIf=\\\"!loggedin\\\">\\n    <ion-list class=\\\"ion-margin colo\\\">\\n    <ion-item class=\\\"colo\\\">\\n      <ion-label position=\\\"floating\\\">Username</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"login.user\\\" name=\\\"user\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\"></ion-input>\\n    </ion-item>\\n    <ion-item class=\\\"colo\\\">\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input type=\\\"password\\\" [(ngModel)]=\\\"login.pass\\\" name=\\\"pass\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\"></ion-input>\\n    </ion-item>\\n    <ion-button mode=\\\"md\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-margin btn2\\\">Submit</ion-button>\\n  </ion-list>\\n  </form>\\n\\t<p class=\\\"pp\\\">Don't have a login? Please create an account on <a href=\\\"https://glmpiapp.com/register\\\">our app website</a></p>\\n\\t<div *ngIf=\\\"loggedin\\\">\\n\\t\\tWelcome back!\\n\\t\\t<p>&nbsp;</p>\\n\\t\\t<ion-button (click)=\\\"doLogout()\\\">Logout</ion-button>\\n\\t</div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \".pp {\\n  text-align: center;\\n  margin-top: 43px;\\n}\\n\\n.content {\\n  --background: #f5f1e9;\\n}\\n\\n.colo {\\n  background: #f5f1e9;\\n  --background: #f5f1e9;\\n}\\n\\n.btn2 {\\n  height: 47px;\\n  /* height: 2.8em; */\\n  /* font-size: 1.6rem; */\\n  color: #fff;\\n  /* background-color: #2d5292; */\\n  --background: #2d5292;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQyxnQkFBQTtBQUNMOztBQUNBO0VBQ0kscUJBQUE7QUFFSjs7QUFBQTtFQUNJLG1CQUFBO0VBQ0EscUJBQUE7QUFHSjs7QUFEQTtFQUNJLFlBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLCtCQUFBO0VBQ0EscUJBQUE7QUFJSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICBtYXJnaW4tdG9wOiA0M3B4O1xyXG59XHJcbi5jb250ZW50e1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjZjVmMWU5O1xyXG59XHJcbi5jb2xve1xyXG4gICAgYmFja2dyb3VuZDogI2Y1ZjFlOTtcclxuICAgIC0tYmFja2dyb3VuZDogI2Y1ZjFlOTtcclxufVxyXG4uYnRuMntcclxuICAgIGhlaWdodDogNDdweDtcclxuICAgIC8qIGhlaWdodDogMi44ZW07ICovXHJcbiAgICAvKiBmb250LXNpemU6IDEuNnJlbTsgKi9cclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgLyogYmFja2dyb3VuZC1jb2xvcjogIzJkNTI5MjsgKi9cclxuICAgIC0tYmFja2dyb3VuZDogIzJkNTI5MjtcclxufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController, ToastController, LoadingController, PopoverController } from '@ionic/angular';\nimport { LoginService } from 'src/app/services/login/login.service';\nimport { Storage } from '@ionic/Storage';\nimport { EventsService } from 'src/app/services/events/events.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n\tlogin: any = {}\n\tspinner: any;\n\tloggedin: boolean = false\n\n\tconstructor(\n\t\tpublic navCtrl: NavController,\n\t\tpublic toastCtrl: ToastController,\n\t\tprivate loginProvider: LoginService,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic viewCtrl: PopoverController ,\n\t\tpublic storage: Storage,\n    public events: EventsService,\n    public loadingController: LoadingController\n    \n\t) {\n\t}\n  ngOnInit() {\n  }\n\tionViewDidLoad() {\n\t\tthis.start()\n\t}\n\n\tstart() {\n\n\t\tthis.storage.get('user_login').then(data => {\n\t\t\tif (data) {\n\t\t\t\t// do checks here\n\t\t\t\tthis.loggedin = true\n\t\t\t} else {\n\t\t\t\tthis.loggedin = false\n\t\t\t}\n\t\t})\n\n\t}\n\n\tdoLogin() {\n\n\t\tif (!this.login)\n\t\t\tthis.presentToast('Please enter a valid login.');\n\n\t\tthis.showSpinner()\n\n\t\tthis.loginProvider.login(this.login).then(response => {\n\n\t\t\tif (!response || (<any>response).success === false) {\n\t\t\t\tthis.loginErr(response)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet login_data = (<any>response).data;\n\n\t\t\tconsole.log('login_data ', login_data)\n\n\t\t\tif (login_data.success == true) {\n\t\t\t\tlocalStorage.setItem('isLogin', login_data.success)\n\t\t\t}\n\t\t\tthis.presentToast(login_data.message);\n\t\t\tthis.events.publish('user:login', login_data)\n\t\t\tthis.storage.set('user_login', login_data)\n\t\t\tthis.dismiss()\n\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.hideSpinner()\n\t\t\tthis.loginErr(err)\n\n\t\t}).catch(e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.presentToast('There was a problem connecting to the server.');\n\t\t})\n\n\t\t// make sure spinner disappears even if there's a problem\n\t\tsetTimeout(() => {\n\t\t\tthis.hideSpinner();\n\t\t}, 5000);\n\t}\n\n\tdoLogout() {\n\n\t\tthis.showSpinner()\n\n\t\tthis.loginProvider.login({}, true).then(response => {\n\n\t\t\tif (!response || (<any>response).success === false) {\n\t\t\t\tthis.loginErr(response)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet login_data = (<any>response).data;\n\n\t\t\tconsole.log(login_data)\n\n\t\t\tthis.presentToast(login_data.message)\n\t\t\tthis.events.publish('user:login', login_data)\n\t\t\tthis.storage.remove('user_login')\n\t\t\tthis.dismiss()\n\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.hideSpinner()\n\t\t\tthis.loginErr(err)\n\n\t\t}).catch(e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.presentToast('There was a problem connecting to the server.');\n\t\t})\n\n\t\t// make sure spinner disappears even if there's a problem\n\t\tsetTimeout(() => {\n\t\t\tthis.hideSpinner();\n\t\t}, 5000);\n\n\t}\n\n\tloginErr(err) {\n\n\t\tconsole.log(err)\n\n\t\tthis.hideSpinner()\n\n\t\tthis.presentToast(err.data.message);\n\n\t}\n\n\tdismiss() {\n    // this.viewCtrl.dismiss();\n    this.navCtrl.navigateBack('tabs/home')\n\t}\n\nasync\tshowSpinner() {\n    const loading = await this.loadingController.create({});\n    await loading.present();\n    await this.navCtrl.navigateForward(['tabs/home']);\n     await loading.dismiss();\n    \n\n\t}\n\nasync\thideSpinner() {\n    const loading = await this.loadingController.create({});\n    await loading.present();\n    await this.navCtrl.navigateForward(['tabs/home']);\n     await loading.dismiss();\n\n\t\t// this.spinner.dismiss();\n\t}\n\nasync\tpresentToast(msg) {\n\n\t\tconsole.log(msg)\n\n\t\tlet toast =await this.toastCtrl.create({\n\t\t\tmessage: msg,\n\t\t\tduration: 5000,\n\t\t\tposition: 'bottom'\n\t\t});\n\n\t\ttoast.present();\n\n\t}\n\n  \n\n}\n"]}