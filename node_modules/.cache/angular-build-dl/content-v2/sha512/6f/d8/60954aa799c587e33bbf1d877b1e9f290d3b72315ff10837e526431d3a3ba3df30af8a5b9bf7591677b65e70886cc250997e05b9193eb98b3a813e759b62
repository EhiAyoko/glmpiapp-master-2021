{"version":3,"sources":["webpack:///src/app/pages/herstories/herstories.page.html","webpack:///src/app/pages/herstories/herstories-routing.module.ts","webpack:///src/app/pages/herstories/herstories.module.ts","webpack:///src/app/pages/herstories/herstories.page.scss","webpack:///src/app/pages/herstories/herstories.page.ts","webpack:///src/app/services/posts/posts.service.ts"],"names":["routes","path","component","HERstoriesPageRoutingModule","imports","forChild","exports","HERstoriesPageModule","declarations","HERstoriesPage","navCtrl","postService","loadingCtrl","toastCtrl","configure","page","url","getUrl","route","create","showBackdrop","loading","present","load","then","items","console","log","loadMore","dismiss","err","error","setTimeout","event","item","opt","navigationExtras","state","navigateForward","target","complete","infiniteScroll","length","i","push","e","warn","msg","message","duration","position","cssClass","toast","loadPosts","selector","template","PostsService","http","data","Promise","resolve","reject","concat","indexOf","get","subscribe","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,2BAA2B;AAAA;AAAA,O;;AAA3BA,iCAA2B,6DAJvC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIuC,GAA3BH,2BAA2B,CAA3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,oBAAoB;AAAA;AAAA,O;;AAApBA,0BAAoB,6DAThC,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,sFAJO,CADD;AAORI,oBAAY,EAAE,CAAC,+DAAD;AAPN,OAAT,CASgC,GAApBD,oBAAoB,CAApB;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCWFE,cAAc;AAK1B,gCACQC,OADR,EAEQC,WAFR,EAGQC,WAHR,EAIQC,SAJR,EAKQC,SALR,EAKmC;AAAA;;AAJ3B,eAAAJ,OAAA,GAAAA,OAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AARR,eAAAC,IAAA,GAAe,CAAf;AAUC,cAAIC,GAAG,GAAGF,SAAS,CAACG,MAAV,EAAV,CAFkC,CAGlC;;AACA,eAAKC,KAAL,GAAaF,GAAG,GAAG,qBAAnB;AACA;;AAfyB;AAAA;AAAA,sCAiBT;;;;;;;;;AACA,6BAAM,KAAKJ,WAAL,CAAiBO,MAAjB,CAAwB;AAC1CC,oCAAY,EAAE;AAD4B,uBAAxB,CAAN;;;AAAd,2BAAKC,O;AAGL,2BAAKA,OAAL,CAAaC,OAAb;AACF,2BAAKP,IAAL,GAAY,CAAZ,C,CACA;;AACA,2BAAKJ,WAAL,CAAiBY,IAAjB,CAAuB,KAAKL,KAA5B,EAAmC,KAAKH,IAAxC,EAA+CS,IAA/C,CAAoD,UAAAC,KAAK,EAAI;AAC3D;AACA,6BAAI,CAACA,KAAL,GAAaA,KAAb;AACJC,+BAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB,KAAI,CAACF,KAA7B,EAH+D,CAI3D;;AACA,6BAAI,CAACG,QAAL,CAAc,IAAd;;AACE,6BAAI,CAACP,OAAL,CAAaQ,OAAb;AACH,uBAPD,WAOS,UAACC,GAAD,EAAS;AAEd,6BAAI,CAACT,OAAL,CAAaQ,OAAb;;AACFH,+BAAO,CAACK,KAAR,CAAc,qBAAd,EAAqCD,GAArC;AAED,uBAZD,E,CAaA;;AACAE,gCAAU,CAAC,YAAM;AACf,6BAAI,CAACX,OAAL,CAAaQ,OAAb;AACD,uBAFS,EAEP,IAFO,CAAV;;;;;;;;;AAGA;AAzCyB;AAAA;AAAA,qCA0CfI,KA1Ce,EA0CRC,IA1CQ,EA0CF;AACvB,gBAAIC,GAAG,GAAG,EAAV;AACE,gBAAIC,gBAAgB,GAAqB;AACvCC,mBAAK,EAAE;AACLH,oBAAI,EAAEA;AADD;AADgC,aAAzC;AAKA,iBAAKxB,OAAL,CAAa4B,eAAb,CAA6B,cAA7B,EAA6CF,gBAA7C;AACF;AAlDyB;AAAA;AAAA,oCAmDfH,KAnDe,EAmDR;AACfP,mBAAO,CAACC,GAAR,CAAY,uBAAZ;AAEAK,sBAAU,CAAC,YAAM;AACfN,qBAAO,CAACC,GAAR,CAAY,2BAAZ;AACAM,mBAAK,CAACM,MAAN,CAAaC,QAAb;AACD,aAHS,EAGP,IAHO,CAAV;AAID;AA1DwB;AAAA;AAAA,mCA4DjBC,cA5DiB,EA4DD;AAAA;;AACxB,iBAAK1B,IAAL;AACA,iBAAKJ,WAAL,CAAiBY,IAAjB,CAAuB,KAAKL,KAA5B,EAAmC,KAAKH,IAAxC,EAA+CS,IAA/C,CAAoD,UAAAC,KAAK,EAAI;AAC3D;AACA,kBAAIiB,MAAM,GAAGjB,KAAK,CAAC,QAAD,CAAlB;;AAEA,kBAAIiB,MAAM,KAAK,CAAf,EAAmB;AACjB,oBAAGD,cAAH,EACEA,cAAc,CAACF,MAAf,CAAsBC,QAAtB;AACF;AACD;;AACD,mBAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4B,EAAEC,CAA9B,EAAiC;AAC/B,sBAAI,CAAClB,KAAL,CAAWmB,IAAX,CAAiBnB,KAAK,CAACkB,CAAD,CAAtB;AACD;;AACD,kBAAGF,cAAH,EACEA,cAAc,CAACF,MAAf,CAAsBC,QAAtB;AAEH,aAfD,WAeU,UAAAK,CAAC,EAAI;AACb;AACA,kBAAGJ,cAAH,EACIA,cAAc,CAACF,MAAf,CAAsBC,QAAtB,GAHS,CAGyB;;AACtCd,qBAAO,CAACoB,IAAR,CAAaD,CAAb;AACD,aApBD;AAqBA;AAnFyB;AAAA;AAAA,uCAoFRE,GApFQ,EAoFH;;;;;;;;AACX,6BAAM,KAAKlC,SAAL,CAAeM,MAAf,CAAsB;AACrC6B,+BAAO,EAAED,GAD4B;AAErCE,gCAAQ,EAAE,IAF2B;AAGrCC,gCAAQ,EAAE,QAH2B;AAIrCC,gCAAQ,EAAE;AAJ2B,uBAAtB,CAAN;;;AAAPC,2B;AAMJA,2BAAK,CAAC9B,OAAN;;;;;;;;;AACA;AA5FyB;AAAA;AAAA,qCA6Fd;AACT,iBAAK+B,SAAL;AACD;AA/FwB;;AAAA;AAAA,S;;;;gBAVlB;;gBACA;;gBADe;;gBAAmB;;gBAElC;;;;AAQI5C,oBAAc,6DAL1B,gEAAU;AACT6C,gBAAQ,EAAE,gBADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,4GAFS;;;;AAAA,OAAV,CAK0B,GAAd9C,cAAc,CAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCHA+C,YAAY;AAGvB,8BACSC,IADT,EACyB;AAAA;;AAAhB,eAAAA,IAAA,GAAAA,IAAA;AAHT,eAAAC,IAAA,GAAY,IAAZ;AAIM;;AALiB;AAAA;AAAA,+BAOlB1C,GAPkB,EAOND,IAPM,EAOA;AAAA;;AAErB;AACA,gBAAI,CAACA,IAAL,EAAY;AACVA,kBAAI,GAAG,GAAP;AACD;;AAED,mBAAO,IAAI4C,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAE3C,kBAAIC,MAAJ,CAF2C,CAI3C;;AACA,kBAAI9C,GAAG,CAAC+C,OAAJ,CAAY,GAAZ,IAAmB,CAAvB,EAA2B;AAC1BD,sBAAM,GAAG,GAAT;AACA,eAFD,MAEO;AACNA,sBAAM,GAAG,GAAT;AACA;;AAED,oBAAI,CAACL,IAAL,CAAUO,GAAV,CAAehD,GAAG,GAAG8C,MAAN,GAAe,OAAf,GAAyB/C,IAAxC,EACKkD,SADL,CACe,UAAAP,IAAI,EAAI;AAEjB,sBAAI,CAACA,IAAL,GAAYA,IAAZ;AAEAE,uBAAO,CAAC,MAAI,CAACF,IAAN,CAAP;AACD,eANL,EAOI,UAAA3B,KAAK,EAAI;AACP;AACA8B,sBAAM,CAAC9B,KAAD,CAAN;AACD,eAVL;AAWA,aAtBS,CAAP;AAwBD;AAtCsB;;AAAA;AAAA,S;;;;gBANhB;;;;AAMIyB,kBAAY,6DAHxB,iEAAW;AACVU,kBAAU,EAAE;AADF,OAAX,CAGwB,GAAZV,YAAY,CAAZ","file":"pages-herstories-herstories-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar color=\\\"tertiary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\" color=\\\"dark\\\" menu=\\\"first\\\"><ion-icon size=\\\"large\\\" color=\\\"light\\\" name=\\\"menu-outline\\\"></ion-icon></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>GLMPI HERstories</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"content\\\">\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <span class=\\\"ion-text-center\\\" *ngIf=\\\"loggedin\\\">\\n  <h2>Please log into your account to see HERstories</h2>\\n</span>\\n    <ion-card class=\\\"ion-text-center\\\">\\n      <ion-card-header>\\n        Checkout the most recent HERstories available!\\n      </ion-card-header>\\n    </ion-card>\\n  <ion-list class=\\\"post-list ion-no-padding\\\">\\n    <ion-item *ngFor=\\\"let item of items\\\" (click)=\\\"itemTapped($event, item)\\\" class=\\\"red\\\">\\n      <ion-avatar slot=\\\"start\\\" *ngIf=\\\"item.featured_image_urls\\\">\\n        <img *ngIf=\\\"item.featured_image_urls && item.featured_image_urls.thumbnail\\\" src=\\\"{{item.featured_image_urls.thumbnail}}\\\">\\n        <img *ngIf=\\\"!item.featured_image_urls || !item.featured_image_urls.thumbnail\\\" src=\\\"assets/default.png\\\">\\n      </ion-avatar>\\n<ion-label>\\n  <h2 *ngIf=\\\"item.title && item.title.rendered\\\" [innerHTML]=\\\"item.title.rendered\\\"></h2>\\n  <p *ngIf=\\\"item.excerpt && item.excerpt.rendered\\\" [innerHTML]=\\\"item.excerpt.rendered\\\"></p>\\n</ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n  <ion-refresher-content></ion-refresher-content>\\n</ion-refresher>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HERstoriesPage } from './herstories.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HERstoriesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HERstoriesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HERstoriesPageRoutingModule } from './herstories-routing.module';\n\nimport { HERstoriesPage } from './herstories.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HERstoriesPageRoutingModule\n  ],\n  declarations: [HERstoriesPage]\n})\nexport class HERstoriesPageModule {}\n","export default \".content {\\n  --background: #f5f1e9;\\n}\\n\\n.red {\\n  --background: #f5f1e9;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaGVyc3Rvcmllcy9oZXJzdG9yaWVzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxxQkFBQTtBQUVKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaGVyc3Rvcmllcy9oZXJzdG9yaWVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250ZW50e1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjZjVmMWU5O1xyXG59XHJcbi5yZWR7XHJcbiAgICAtLWJhY2tncm91bmQ6ICNmNWYxZTk7XHJcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController, LoadingController, ToastController } from '@ionic/angular';\nimport { PostsService } from 'src/app/services/posts/posts.service';\nimport { ConfigureService } from 'src/app/services/configure/configure.service';\nimport { NavigationExtras } from '@angular/router';\n\n@Component({\n  selector: 'app-herstories',\n  templateUrl: './herstories.page.html',\n  styleUrls: ['./herstories.page.scss'],\n})\nexport class HERstoriesPage implements OnInit {\n\titems: any;\n\tpage: number = 1;\n\troute: string;\n  loading;\n\tconstructor(\n\t\tpublic navCtrl: NavController, \n\t\tpublic postService: PostsService,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic toastCtrl: ToastController,\n\t\tpublic configure: ConfigureService\n\t\t) {\n\t\tlet url = configure.getUrl()\n\t\t// put your desired WP-API route here. URL params, CPTs, and custom routes all OK\n\t\tthis.route = url + 'wp-json/wp/v2/posts'\n\t}\n\nasync\tloadPosts() {\n    this.loading =await this.loadingCtrl.create({\n      showBackdrop: false,\n    });\n    this.loading.present();\n\t\tthis.page = 1;\n\t\t// any menu imported from WP has to use same component. Other pages can be added manually with different components\n\t\tthis.postService.load( this.route, this.page ).then(items => {\n\t\t  // Loads posts from WordPress API\n\t\t  this.items = items;\nconsole.log('postdata', this.items)\n\t\t  // load more right away\n\t\t  this.loadMore(null);\n      this.loading.dismiss();\n\t\t}).catch((err) => {\n\n      this.loading.dismiss();\n\t\t  console.error('Error getting posts', err);\n\n\t\t});\n\t\t// make sure spinner never gets stuck on\n\t\tsetTimeout(() => {\n\t\t  this.loading.dismiss();\n\t\t}, 8000);\n\t}\n\titemTapped(event, item) {\n\t\tlet opt = {};\n    let navigationExtras: NavigationExtras = {\n      state: {\n        item: item\n      },\n    };\n    this.navCtrl.navigateForward('post-details', navigationExtras);\n\t}\n  doRefresh(event) {\n    console.log('Begin async operation');\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      event.target.complete();\n    }, 2000);\n  }\n\n\tloadMore(infiniteScroll) {\n\t\tthis.page++;\n\t\tthis.postService.load( this.route, this.page ).then(items => {\n\t\t  // Loads posts from WordPress API\n\t\t  let length = items[\"length\"];\n\n\t\t  if( length === 0 ) {\n\t\t    if(infiniteScroll)\n        infiniteScroll.target.complete();\n\t\t    return;\n\t\t  }\n\t\t  for (var i = 0; i < length; ++i) {\n\t\t    this.items.push( items[i] );\n\t\t  }\n\t\t  if(infiniteScroll)\n      infiniteScroll.target.complete();\n\n\t\t}).catch( e => {\n\t\t  // promise was rejected, usually a 404 or error response from API\n\t\t  if(infiniteScroll)\n        infiniteScroll.target.complete(); // this is how you need to call in v4\n\t\t  console.warn(e)\n\t\t});\n\t}\nasync\tpresentToast(msg) {\n\t\tlet toast =await this.toastCtrl.create({\n\t\t  message: msg,\n\t\t  duration: 3000,\n\t\t  position: 'bottom',\n\t\t  cssClass: 'normal-toast'\n\t\t});\n\t\ttoast.present();\n\t}\n  ngOnInit() {\n    this.loadPosts()\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { HttpClient } from '@angular/common/http';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PostsService {\n  data: any = null;\n\n  constructor(\n    public http: HttpClient\n    ) {}\n\n  load(url:string, page) {\n\n    // set pagination\n    if( !page ) {\n      page = '1';\n    }\n\n    return new Promise( (resolve, reject) => {\n\n\t\tvar concat;\n\n\t\t// check if url already has a query param\n\t\tif( url.indexOf('?') > 0 ) {\n\t\t\tconcat = '&';\n\t\t} else {\n\t\t\tconcat = '?';\n\t\t}\n\n\t\tthis.http.get( url + concat + 'page=' + page )\n\t\t    .subscribe(data => {\n\n\t\t      this.data = data;\n\n\t\t      resolve(this.data);\n\t\t    },\n\t\t    error => {\n\t\t      // probably a bad url or 404\n\t\t      reject(error);\n\t\t    })\n\t});\n\n  }\n}\n"]}